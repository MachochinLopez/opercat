/// @description preStep

if (dir == 0) and (x <= min_pos) dir = 1;
if (dir == 1) and (x >= max_pos) dir = 0;